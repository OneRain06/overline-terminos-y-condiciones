<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
	<link rel="icon" href="logo-overline.webp" type="image/webp">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Overline Marketplace</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>

/* ============================= */
/* VARIABLES */
/* ============================= */

:root{

--accent:#0066ff;
--accent-hover:#0052cc;

--bg:#f8fafc;
--card:#ffffff;

--text:#0f172a;
--muted:#64748b;

--border:#e5e7eb;

--shadow-sm:0 1px 2px rgba(0,0,0,0.05);
--shadow-md:0 4px 12px rgba(0,0,0,0.08);
--shadow-lg:0 10px 30px rgba(0,0,0,0.12);

}


/* BASE */

body{
margin:0;
font-family:'poppins',sans-serif;
background:var(--bg);
color:var(--text);
}


/* HEADER */

.header{
position:sticky;
top:0;
z-index:1000;

display:flex;
justify-content:space-between;
align-items:center;

padding:14px 28px;

background:white;
border-bottom:1px solid var(--border);
}

.logo{
font-weight:700;
font-size:20px;
color:var(--accent);
}

.header-right{
display:flex;
gap:10px;
align-items:center;
}

.search-input{
padding:10px;
border-radius:10px;
border:1px solid var(--border);
}

.cart-button{
background:var(--accent);
color:white;
border:none;
padding:10px 16px;
border-radius:10px;
cursor:pointer;
font-weight:600;
}


/* HERO */

.hero{

padding:40px 20px;

background:white;

text-align:center;

border-bottom:1px solid var(--border);

}

.hero h1{

margin:0;
font-size:32px;

}

.hero p{

color:var(--muted);
margin-top:10px;

}

.hero button{

margin-top:20px;

background:var(--accent);
color:white;

border:none;

padding:14px 22px;

border-radius:10px;

cursor:pointer;

font-weight:600;

}


/* CATEGORIES */

.categories{

display:flex;
gap:10px;
padding:14px 20px;

overflow-x:auto;

background:white;
border-bottom:1px solid var(--border);

}

.category{

padding:8px 16px;
border-radius:20px;
border:1px solid var(--border);

cursor:pointer;
white-space:nowrap;

}

.category.active{

background:var(--accent);
color:white;

}


/* GRID */

.grid{

padding:24px;

display:grid;
grid-template-columns:repeat(auto-fill,minmax(260px,1fr));

gap:20px;

}


/* CARD */

.card{

background:white;

border-radius:14px;

border:1px solid var(--border);

overflow:hidden;

transition:.2s;

display:flex;
flex-direction:column;

}

.card:hover{

transform:translateY(-4px);
box-shadow:var(--shadow-md);

}

.card img{

width:100%;
height:160px;
object-fit:cover;

}

.card-content{

padding:14px;
display:flex;
flex-direction:column;
gap:6px;

}

.card-title{
font-weight:600;
}

.price{

color:var(--accent);
font-weight:700;

}

.desc{

font-size:13px;
color:var(--muted);

}

.badges{

display:flex;
gap:6px;

}

.badge{

font-size:11px;

background:#eef2ff;

color:#3730a3;

padding:4px 8px;

border-radius:6px;

}

.card-buttons{

display:flex;
gap:6px;
margin-top:10px;

}

.card button{

flex:1;

border:none;
padding:10px;

border-radius:8px;

cursor:pointer;

}

.add-btn{
background:var(--accent);
color:white;
}

.view-btn{
background:#f1f5f9;
}


/* TRUST */

.trust{

padding:30px;
background:white;

display:flex;
justify-content:center;
gap:40px;

border-top:1px solid var(--border);

}

.trust div{

text-align:center;

}


/* MODAL */

.modal{

position:fixed;

top:0;
left:0;

width:100%;
height:100%;

background:rgba(0,0,0,0.5);

display:none;

justify-content:center;
align-items:center;

z-index:2000;

}

.modal.active{
display:flex;
}

.modal-content{

background:white;

padding:20px;

border-radius:12px;

width:400px;
max-width:90%;

}


/* ============================= */
/* ULTRA CART 2.0 */
/* ============================= */

#overlay{
position:fixed;
inset:0;
background:rgba(15,23,42,0.55);
backdrop-filter:blur(6px);
opacity:0;
pointer-events:none;
transition:.3s ease;
z-index:999;
}

#overlay.active{
opacity:1;
pointer-events:all;
}

#cartPanel{
position:fixed;
right:-420px;
top:0;
width:420px;
height:100%;

background:#ffffff;

box-shadow:-20px 0 60px rgba(0,0,0,0.15);

transition:.45s cubic-bezier(.16,1,.3,1);
z-index:1000;

display:flex;
flex-direction:column;
}

#cartPanel.active{
right:0;
}

/* HEADER */

.cart-header{
padding:24px;
font-size:18px;
font-weight:700;
border-bottom:1px solid var(--border);
display:flex;
justify-content:space-between;
align-items:center;
background:#ffffff;
position:sticky;
top:0;
z-index:5;
}

/* ITEMS AREA */

.cart-items{
flex:1;
overflow-y:auto;
padding:20px;
display:flex;
flex-direction:column;
gap:14px;
}

/* ITEM CARD */

.cart-items > div{
background:#f8fafc;
padding:14px;
border-radius:12px;
display:flex;
justify-content:space-between;
align-items:center;
font-size:14px;
box-shadow:var(--shadow-sm);
}

.cart-items button{
background:white;
border:1px solid var(--border);
width:28px;
height:28px;
border-radius:8px;
cursor:pointer;
font-weight:600;
transition:.2s;
}

.cart-items button:hover{
background:var(--accent);
color:white;
border-color:var(--accent);
}

/* FOOTER */

.cart-footer{
padding:20px;
border-top:1px solid var(--border);
background:white;
display:flex;
flex-direction:column;
gap:12px;
}

/* SUMMARY COMPACTO */

.cart-footer{
padding:18px;
border-top:1px solid var(--border);
background:white;
display:flex;
flex-direction:column;
gap:10px;
font-size:14px;
}

/* Filas tipo resumen */

.cart-footer > span,
.cart-footer > br{
display:none;
}

.cart-footer{
line-height:1.4;
}

.cart-footer div{
display:flex;
justify-content:space-between;
align-items:center;
}

/* Totales m√°s peque√±os y alineados */

#subtotal,
#total,
#totalFinal{
font-weight:600;
}

#totalFinal{
font-size:18px;
color:var(--accent);
font-weight:700;
}

/* IVA compacto */

.cart-footer label{
display:flex;
justify-content:space-between;
align-items:center;
font-size:13px;
color:var(--muted);
}


/* CHECKBOX */

.cart-footer label{
display:flex;
align-items:center;
gap:8px;
font-size:14px;
color:var(--muted);
}

/* INPUTS */

.cart-footer input{
padding:12px;
border-radius:10px;
border:1px solid var(--border);
font-family:'poppins',sans-serif;
transition:.2s;
}

.cart-footer input:focus{
outline:none;
border-color:var(--accent);
box-shadow:0 0 0 3px rgba(0,102,255,0.1);
}

/* SEND BUTTON */

.cart-footer .send{
background:var(--accent);
color:white;
border:none;
padding:14px;
border-radius:12px;
font-weight:600;
cursor:pointer;
transition:.25s;
box-shadow:var(--shadow-sm);
}

.cart-footer .send:hover{
background:var(--accent-hover);
transform:translateY(-2px);
box-shadow:var(--shadow-md);
}

/* RECOMMENDATIONS */

.recommendations{
margin-top:10px;
padding-top:10px;
border-top:1px solid var(--border);
}

.recommendations h4{
margin-bottom:10px;
font-size:14px;
}

.recommend-card{
background:#f1f5f9;
padding:12px;
border-radius:10px;
display:flex;
justify-content:space-between;
align-items:center;
font-size:13px;
transition:.2s;
}

.recommend-card:hover{
background:#e2e8f0;
}

.recommend-card button{
background:var(--accent);
color:white;
border:none;
padding:6px 10px;
border-radius:8px;
cursor:pointer;
}

/* MOBILE */

@media(max-width:600px){

#cartPanel{
width:100%;
}

}
/* ============================= */
/* UX MEJORADO CHECKOUT */
/* ============================= */

.cart-header{
padding:20px 24px;
font-size:18px;
font-weight:700;
border-bottom:1px solid var(--border);
display:flex;
justify-content:space-between;
align-items:center;
background:#fff;
position:sticky;
top:0;
z-index:10;
}

.close-cart{
background:none;
border:none;
font-size:20px;
cursor:pointer;
color:var(--muted);
transition:.2s;
}

.close-cart:hover{
color:var(--accent);
transform:scale(1.1);
}

/* RESUMEN COMPACTO */

.summary-row{
display:flex;
justify-content:space-between;
font-size:14px;
}

.summary-row span:last-child{
font-weight:600;
}

.iva-row{
display:flex;
justify-content:space-between;
align-items:center;
font-size:13px;
color:var(--muted);
}

.summary-total{
margin-top:8px;
padding-top:8px;
border-top:1px solid var(--border);
display:flex;
justify-content:space-between;
font-size:16px;
font-weight:700;
color:var(--accent);
}
.cart-item-row{
display:flex;
justify-content:space-between;
align-items:center;
gap:10px;
background:#f8fafc;
padding:14px;
border-radius:12px;
box-shadow:var(--shadow-sm);
}

.cart-item-info{
display:flex;
flex-direction:column;
gap:4px;
font-size:13px;
}

.cart-item-price{
color:var(--muted);
font-size:12px;
}

.cart-item-subtotal{
font-weight:600;
color:var(--accent);
font-size:13px;
}

.cart-item-controls{
display:flex;
align-items:center;
gap:6px;
}
.promo-banners{
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
padding:30px;
background:white;
}

.promo-banners img{
width:100%;
border-radius:16px;
object-fit:cover;
cursor:pointer;
transition:.3s;
box-shadow:var(--shadow-md);
}

.promo-banners img:hover{
transform:translateY(-6px);
box-shadow:var(--shadow-lg);
}

@media(max-width:768px){
.promo-banners{
grid-template-columns:1fr;
}
}
.discount-progress{
background:#f1f5f9;
padding:12px;
border-radius:10px;
font-size:12px;
}

.progress-bar{
height:6px;
background:#e5e7eb;
border-radius:6px;
margin-top:6px;
overflow:hidden;
}

.progress-fill{
height:100%;
width:0%;
background:var(--accent);
transition:.4s;
}

.filters{
display:flex;
gap:12px;
padding:20px;
background:white;
border-bottom:1px solid var(--border);
flex-wrap:wrap;
}

.filters select{
padding:10px 14px;
border-radius:10px;
border:1px solid var(--border);
font-family:'poppins',sans-serif;
cursor:pointer;
}
.card-premium{
border:2px solid #facc15;
box-shadow:0 0 0 2px rgba(250,204,21,0.2);
}

.premium-badge{
background:#fef9c3;
color:#854d0e;
}

.pro-badge{
background:#dcfce7;
color:#166534;
}

.bestseller-badge{
background:#fee2e2;
color:#991b1b;
}

.recommended-badge{
background:#e0f2fe;
color:#075985;
}
/* ============================= */
/* FEATURED CAROUSEL */
/* ============================= */

.featured-carousel{
padding:30px;
background:white;
border-bottom:1px solid var(--border);
}

.carousel-header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:20px;
}

.carousel-header h2{
margin:0;
font-size:20px;
}

.carousel-controls{
display:flex;
gap:10px;
}

.carousel-btn{
width:36px;
height:36px;
border-radius:10px;
border:1px solid var(--border);
background:white;
cursor:pointer;
font-size:18px;
transition:.2s;
}

.carousel-btn:hover{
background:var(--accent);
color:white;
border-color:var(--accent);
}

.carousel-wrapper{
overflow:hidden;
}

.carousel-track{
display:flex;
gap:20px;
overflow-x:auto;
scroll-behavior:smooth;
scrollbar-width:none;
}

.carousel-track::-webkit-scrollbar{
display:none;
}

.carousel-track .card{
min-width:280px;
flex:0 0 auto;
}
/* ============================= */
/* PACK CAROUSEL */
/* ============================= */
.pack-track{
  display:flex;
  gap:20px;
  transition:transform .4s ease;
}

.pack-carousel{
padding:40px 30px;
background:linear-gradient(135deg,#0f172a,#1e293b);
color:white;
}

.pack-carousel .carousel-header h2{
color:white;
}

.pack-carousel .carousel-btn{
background:#1e293b;
border:1px solid rgba(255,255,255,0.2);
color:white;
}

.pack-carousel .carousel-btn:hover{
background:var(--accent);
border-color:var(--accent);
}

.pack-carousel .card{
background:#ffffff;
color:var(--text);
border:none;
min-width:300px;
box-shadow:0 20px 40px rgba(0,0,0,0.3);
}

.pack-badge{
background:#facc15;
color:#854d0e;
font-size:11px;
padding:4px 8px;
border-radius:6px;
font-weight:600;
}
.pack-carousel .card{
  flex: 0 0 calc(33.333% - 14px); /* 3 tarjetas desktop */
  max-width: calc(33.333% - 14px);
}
@media(max-width:1024px){
  .pack-carousel .card{
    flex: 0 0 calc(50% - 10px); /* 2 tarjetas */
    max-width: calc(50% - 10px);
  }
}
@media(max-width:640px){
  .pack-carousel .card{
    flex: 0 0 100%; /* 1 tarjeta */
    max-width: 100%;
  }
}
/*footer=================================================================================*/
	.overline-footer {
  background: #050912;
  padding: 80px 20px 30px;
  color: #9aa4c4;
  border-top: 1px solid rgba(0,132,255,0.2);
}

.overline-footer-container {
  max-width: 1200px;
  margin: auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 50px;
}

.footer-col h3 {
  font-size: 24px;
  color: #fff;
  margin-bottom: 20px;
}

.footer-col h4 {
  font-size: 18px;
  color: #fff;
  margin-bottom: 20px;
}

.footer-col p {
  line-height: 1.6;
}

.footer-col ul {
  list-style: none;
  padding: 0;
}

.footer-col ul li {
  margin-bottom: 12px;
}

.footer-col ul li a {
  text-decoration: none;
  color: #9aa4c4;
  transition: 0.3s;
}

.footer-col ul li a:hover {
  color: #0084ff;
}

.footer-socials {
  display: flex;
  gap: 15px;
}

.footer-socials a {
  width: 40px;
  height: 40px;
  background: rgba(0,132,255,0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  color: #0084ff;
  font-size: 16px;
  transition: 0.3s;
}

.footer-socials a:hover {
  background: #0084ff;
  color: #fff;
  box-shadow: 0 0 15px rgba(0,132,255,0.5);
}

.footer-bottom {
  text-align: center;
  margin-top: 50px;
  padding-top: 20px;
  border-top: 1px solid rgba(0,132,255,0.15);
  font-size: 14px;
}
/* ============================= */
/* PREMIUM MOBILE HEADER */
/* ============================= */

.logo-img{
  width:120px;
  transition:.3s;
}

.search-toggle{
  display:none;
  background:none;
  border:none;
  font-size:18px;
  cursor:pointer;
}

.search-container{
  transition:.3s;
}

.cart-button{
  position:relative;
}

.cart-badge{
  position:absolute;
  top:-6px;
  right:-6px;
  background:#ff3b30;
  color:white;
  font-size:11px;
  padding:3px 6px;
  border-radius:50px;
  font-weight:600;
}

/* ===== MOBILE ===== */

@media(max-width:600px){

.header{
  padding:12px 16px;
}

.logo-img{
  width:95px;
}

.search-toggle{
  display:block;
}

.search-container{
  position:absolute;
  top:60px;
  right:15px;
  background:white;
  padding:10px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
  opacity:0;
  pointer-events:none;
  transform:translateY(-10px);
}

.search-container.active{
  opacity:1;
  pointer-events:auto;
  transform:translateY(0);
}

.search-input{
  width:200px;
}

}
.header{
transition:.3s;
}
.services-container{
display:grid;
grid-template-columns:repeat(auto-fit, minmax(250px,1fr));
gap:20px;
}

.header.scrolled{
padding:8px 16px;
box-shadow:0 8px 20px rgba(0,0,0,0.08);
}
/* ============================= */
/* SERVICES MOBILE 2 COLUMN FIX */
/* ============================= */

@media(max-width:600px){

.services-container{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:12px;
  padding:12px;
}

.service-card{
  width:100%;
}

}
/* ============================= */
/* MOBILE 2 COLUMN FIX */
/* ============================= */

@media(max-width:600px){

.grid{
grid-template-columns:repeat(2,1fr);
gap:12px;
padding:12px;
}

.card img{
height:120px;
}

.desc{
display:none;
}

#cartPanel{
width:100%;
}

}

</style>
</head>
<body>

<header class="header">

  <div class="header-left">
    <a href="https://overlineagencia.com.co/">
      <img src="log2.webp" class="logo-img">
    </a>
  </div>

  <div class="header-right">

    <button class="search-toggle" onclick="toggleSearch()">üîç</button>

    <div class="search-container">
      <input id="searchInput" class="search-input" placeholder="Buscar servicio">
    </div>

    <button class="cart-button" onclick="toggleCart()">
      üõí
      <span class="cart-badge" id="cartCount">0</span>
    </button>

  </div>

</header>



<section class="hero">

<h1>Marketplace de servicios creativos</h1>

<p>Compra servicios profesionales de dise√±o, video y marketing</p>

<button onclick="document.getElementById('grid').scrollIntoView({behavior:'smooth'})">
Explorar servicios
</button>

</section>
<section class="pack-carousel">

  <div class="carousel-header">
    <h2>üî• Packs con descuento exclusivo</h2><br>
    <div class="carousel-controls">
      <button class="carousel-btn" id="prevPack">‚Äπ</button>
      <button class="carousel-btn" id="nextPack">‚Ä∫</button>
    </div>
  </div>
<p>al agregar alguno de estos packs, no se pueden sumar mas servicios a la cotizaci√≥n, ya que de hacerlo, se contara como no validos los descuentos</p>

  <div class="carousel-wrapper">
    <div class="carousel-track" id="packTrack"></div>
  </div>

</section>

<section class="featured-carousel">

  <div class="carousel-header">
    <h2>Destacados</h2>
    <div class="carousel-controls">
      <button class="carousel-btn" id="prevFeatured">‚Äπ</button>
      <button class="carousel-btn" id="nextFeatured">‚Ä∫</button>
    </div>
  </div>

  <div class="carousel-wrapper">
    <div class="carousel-track" id="featuredTrack"></div>
  </div>

</section>

<section class="filters">

<select id="categoryFilter">
<option value="">Todas las categor√≠as</option>
<option value="Redes">Redes</option>
<option value="Branding">Branding</option>
<option value="Audiovisuales">Audiovisuales</option>
<option value="Fotograf√≠a">Fotograf√≠a</option>
<option value="Copy">Copy</option>
<option value="Eventos">Eventos</option>
<option value="Streaming">Streaming</option>
<option value="Papeler√≠a">Papeler√≠a</option>
</select>

<select id="priceFilter">
<option value="">Todos los precios</option>
<option value="1">Menos de $100.000</option>
<option value="2">$100k - $300k</option>
<option value="3">$300k - $600k</option>
<option value="4">M√°s de $600k</option>
</select>

<select id="sortFilter">
<option value="default">Orden predeterminado</option>
<option value="low">Precio menor a mayor</option>
<option value="high">Precio mayor a menor</option>
<option value="az">A - Z</option>
<option value="za">Z - A</option>
<option value="premium">Solo Premium</option>
<option value="bestseller">M√°s vendidos</option>
</select>

</section>



<main class="grid" id="grid"></main>


<section class="trust">

<div>
<strong>Entrega r√°pida</strong>
<br>
24h - 5 d√≠as
</div>

<div>
<strong>Calidad profesional</strong>
<br>
Equipo experto
</div>

<div>
<strong>Soporte directo</strong>
<br>
WhatsApp
</div>

</section>


<div class="modal" id="modal">

<div class="modal-content" id="modalContent"></div>

</div>


<div id="overlay" onclick="toggleCart()"></div>

<aside id="cartPanel">

<div class="cart-header">
<span>Carrito</span>
<button class="close-cart" onclick="toggleCart()">‚úï</button>
</div>

<div class="cart-items" id="cartItems"></div>

<div class="cart-footer">
<div class="discount-progress">
  <div class="progress-text" id="progressText"></div>
  <div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
  </div>
</div>

<div class="summary-row">
<span>Subtotal</span>
<span>$<span id="subtotal">0</span></span>
</div>

<div class="summary-row">
<span>Descuento</span>
<span><span id="discount">0</span>%</span>
</div>

<div class="summary-row">
<span>Total</span>
<span>$<span id="total">0</span></span>
</div>

<label class="iva-row">
<span>IVA (19%)</span>
<input type="checkbox" id="ivaCheck">
</label>

<div class="summary-total">
<span>Total final</span>
<span>$<span id="totalFinal">0</span></span>
</div>

<hr>

<input id="nombre" placeholder="Nombre">
<input id="email" placeholder="Email">
<input id="whatsapp" placeholder="WhatsApp">

<button class="send" onclick="sendQuote()">
Enviar cotizaci√≥n
</button>

<div class="recommendations" id="recommendations"></div>

</div>

</aside>

<footer class="overline-footer">

  <div class="overline-footer-container">

    <!-- Columna 1 -->
    <div class="footer-col">
      <h3>OVERLINE</h3>
      <p>
        Agencia creativa especializada en dise√±o gr√°fico, branding,
        publicidad digital y producci√≥n audiovisual.
      </p>
    </div>

    

    <!-- Columna 3 -->
    <div class="footer-col">
      <h4>Contacto</h4>
      <ul>
        <li><a href="https://wa.me/573018282771" target="_blank">WhatsApp</a></li>
        <li><a href="mailto:overlineagenciagrafica@gmail.com">Correo</a></li>
        <li>Bogot√° D.C., Colombia</li>
      </ul>
    </div>

    <!-- Columna 4 -->
    <div class="footer-col">
      <h4>S√≠guenos</h4>
      <div class="footer-socials">
        <a href="https://www.facebook.com/share/16WUbAvNFM/" target="_blank"><img src="facebook-icon.png" style="width: 45px;"></a>
        <a href="https://www.instagram.com/overline_agencia_grafica?igsh=MXYzbmZva2Ntc201aw==" target="_blank"><img src="instagram-icon.png" style="width: 45px;"></a>
        <a href="https://www.tiktok.com/@overline.agencia?_r=1&_t=ZS-93oXS0Mkwa5" target="_blank"><img src="tiktok-icon.png" style="width: 45px;"></a>
      </div>
    </div>

  </div>

  <div class="footer-bottom">
    ¬© <span id="year"></span> OVERLINE AGENCIA S.A.S ‚Äì Todos los derechos reservados.
  </div>

</footer>

<script>

/* ENDPOINT NO MODIFICADO */

const ENDPOINT = "https://script.google.com/macros/s/AKfycbxslSynqXy8QMiptWc4kyMcIDKfAhuOPGCXgooOG54NV57jAvvMamqO6EkUBjHM0mDG/exec";


/* SERVICES */

const services = [

{
id:1,
name:"Stories",
price:20000,
level:"A",
category:"Redes",
img:"05.webp",
desc:"Incluye 1 historia animada en formato vertical 1080x1920, dise√±o personalizado, adaptaci√≥n a identidad visual, hasta 2 ajustes y entrega en JPG/MP4 listo para publicar."
},

{
id:2,
name:"Flyers",
price:30000,
level:"A",
category:"Redes",
img:"06.webp",
desc:"1 flyer digital 1080x1350 o formato personalizado, dise√±o estrat√©gico, adaptaci√≥n de colores y tipograf√≠as de marca, 2 revisiones y entrega en JPG y webp."
},

{
id:3,
name:"Post √önico",
price:40000,
level:"A",
category:"Redes",
img:"07.webp",
desc:"1 publicaci√≥n optimizada para Instagram o Facebook (1080x1080), dise√±o estrat√©gico enfocado en engagement, 2 ajustes incluidos y entrega lista para publicar."
},

{
id:4,
name:"Formato Adicional (adaptaci√≥n)",
price:40000,
level:"A",
category:"Redes",
img:"08.webp",
desc:"Adaptaci√≥n de pieza existente a nuevo formato (story, reel cover, banner, etc.), incluye 1 versi√≥n adicional y 1 ajuste."
},

{
id:5,
name:"Mini Portada para Reels",
price:50000,
level:"A",
category:"Redes",
img:"09.webp",
desc:"1 portada optimizada para Reels (1080x1920), dise√±o con enfoque en CTR, adaptaci√≥n a branding y entrega en JPG."
},

{
id:6,
name:"Plantilla Canva Editable",
price:60000,
level:"A",
category:"Papeler√≠a",
img:"10.webp",
desc:"1 plantilla personalizada editable en Canva, organizada por capas, con tipograf√≠as y colores de marca, incluye link editable."
},

{
id:7,
name:"Dise√±o de Avatar",
price:60000,
level:"A",
category:"Redes",
img:"11.webp",
desc:"Avatar digital profesional en formato webp y JPG, fondo personalizado, adaptaci√≥n a identidad visual y 2 revisiones."
},

{
id:8,
name:"Optimizaci√≥n de biograf√≠a IG",
price:60000,
level:"A",
category:"Redes",
img:"12.webp",
desc:"Reestructuraci√≥n estrat√©gica de biograf√≠a, optimizaci√≥n SEO b√°sica, propuesta de CTA y estructura persuasiva lista para copiar y pegar."
},

{
id:9,
name:"√çconos de Highlights IG",
price:60000,
level:"A",
category:"Redes",
img:"13.webp",
desc:"Set de hasta 6 √≠conos personalizados, dise√±o minimalista alineado a marca y entrega en webp."
},

{
id:10,
name:"Solo Ed√≠talo",
price:70000,
level:"A",
category:"Audiovisuales",
img:"14.webp",
desc:"Edici√≥n profesional de video (hasta 60 segundos), correcci√≥n de color b√°sica, subt√≠tulos autom√°ticos y exportaci√≥n en formato vertical."
},

{
id:11,
name:"Miniatura Impacto (YouTube)",
price:70000,
level:"A",
category:"Redes",
img:"15.webp",
desc:"Dise√±o de 1 thumbnail optimizada para YouTube (1280x720), composici√≥n estrat√©gica enfocada en CTR, integraci√≥n de branding, 2 ajustes incluidos y entrega en JPG lista para subir."
},

{
id:12,
name:"Formato R√°pido",
price:80000,
level:"A",
category:"Audiovisuales",
img:"16.webp",
desc:"Edici√≥n de video corto (hasta 45 segundos), cortes din√°micos, m√∫sica libre de derechos, subt√≠tulos b√°sicos y exportaci√≥n en formato vertical listo para Reels, Shorts o TikTok."
},

{
id:13,
name:"Tarjeta de Presentaci√≥n",
price:80000,
level:"A",
category:"Papeler√≠a",
img:"17.webp",
desc:"Dise√±o profesional de tarjeta corporativa frente y respaldo, preparaci√≥n para impresi√≥n CMYK, archivos listos en PDF y webp, incluye 2 ajustes."
},

{
id:14,
name:"Stickers Promocionales",
price:80000,
level:"A",
category:"Papeler√≠a",
img:"18.webp",
desc:"Dise√±o de hasta 3 stickers personalizados, adaptados a identidad visual, entrega en webp y PDF listo para impresi√≥n."
},

{
id:15,
name:"Carrusel 10x",
price:80000,
level:"A",
category:"Redes",
img:"19.webp",
desc:"Dise√±o de carrusel de hasta 10 slides estrat√©gicos, estructura educativa o persuasiva, coherencia visual completa y entrega en formato optimizado para Instagram."
},

{
id:16,
name:"Collage Digital",
price:80000,
level:"A",
category:"Redes",
img:"20.webp",
desc:"Composici√≥n visual creativa con integraci√≥n de m√∫ltiples im√°genes, estilo personalizado alineado a marca y entrega en alta resoluci√≥n lista para redes."
},

{
id:17,
name:"Reel B√°sico",
price:100000,
level:"B",
category:"Audiovisuales",
bestseller:true,
recommended:true,
img:"01.webp",
desc:"Grabaci√≥n de hasta 1 hora en una locaci√≥n, edici√≥n din√°mica (30-60 segundos), cortes estrat√©gicos, subt√≠tulos animados b√°sicos, m√∫sica libre de derechos, 1 ronda de ajustes y entrega en formato vertical 1080x1920 listo para publicar."
},

{
id:18,
name:"Certificado o Constancia",
price:100000,
level:"B",
category:"Papeler√≠a",
img:"21.webp",
desc:"Dise√±o formal personalizado, formato editable y versi√≥n lista para impresi√≥n o env√≠o digital, incluye 2 ajustes."
},

{
id:19,
name:"Copywriting Pro",
price:100000,
level:"B",
category:"Copy",
img:"22.webp",
desc:"Redacci√≥n estrat√©gica de 1 pieza publicitaria o post, estructura persuasiva (AIDA o PAS), optimizaci√≥n de CTA y entrega en formato editable."
},

{
id:20,
name:"Guion para Reel o Video",
price:100000,
level:"B",
category:"Copy",
img:"23.webp",
desc:"Guion estructurado con hook inicial, desarrollo estrat√©gico, storytelling y cierre con llamado a la acci√≥n. Incluye versi√≥n editable."
},

{
id:21,
name:"Redacci√≥n de contenido",
price:100000,
level:"B",
category:"Copy",
img:"24.webp",
desc:"Creaci√≥n de 3 textos optimizados para redes o web, enfoque en posicionamiento y conversi√≥n, entrega editable."
},

{
id:22,
name:"Hoja Membretada + Cotizaci√≥n",
price:120000,
level:"B",
category:"Papeler√≠a",
img:"25.webp",
desc:"Dise√±o corporativo de hoja membretada y plantilla de cotizaci√≥n, alineado a identidad visual, listo para impresi√≥n y versi√≥n editable."
},

{
id:23,
name:"Mini Producto (x5)",
price:120000,
level:"B",
category:"Fotograf√≠a",
img:"26.webp",
desc:"Sesi√≥n fotogr√°fica de hasta 5 productos, iluminaci√≥n profesional, fondo neutro o personalizado y entrega de 5 fotos editadas en alta resoluci√≥n."
},

{
id:24,
name:"Alert Pack",
price:120000,
level:"B",
category:"Streaming",
img:"27.webp",
desc:"Pack de 5 alertas animadas personalizadas (follow, sub, donate, raid, etc.), entrega en formatos compatibles con OBS (WebM o MP4)."
},

{
id:25,
name:"Intermedios Pro",
price:150000,
level:"B",
category:"Streaming",
img:"28.webp",
desc:"Dise√±o de 3 pantallas intermedias (Starting Soon, Be Right Back, Offline), personalizadas con identidad visual y listas para streaming."
},

{
id:27,
name:"Testimonial Pro",
price:180000,
level:"B",
category:"Audiovisuales",
img:"30.webp",
desc:"Grabaci√≥n en locaci√≥n, iluminaci√≥n profesional, edici√≥n cinematogr√°fica, subt√≠tulos din√°micos y entrega optimizada para redes."
},

{
id:29,
name:"Redise√±o de Logo",
price:200000,
level:"C",
category:"Branding",
img:"32.webp",
desc:"Actualizaci√≥n profesional del logo actual, mejora de proporciones, tipograf√≠a y adaptabilidad, entrega en formatos digitales listos para uso."
},

{
id:30,
name:"Intro Logo Animada",
price:200000,
level:"C",
category:"Streaming",
img:"33.webp",
desc:"Animaci√≥n profesional de logo (5-10 segundos), efectos din√°micos personalizados, m√∫sica opcional y entrega en MP4 en alta calidad."
},

{
id:31,
name:"Video Producto Lifestyle",
price:220000,
level:"C",
category:"Audiovisuales",
img:"	34.webp",
desc:"Producci√≥n audiovisual mostrando producto en uso real, grabaci√≥n profesional, edici√≥n estrat√©gica y entrega optimizada para campa√±as digitales."
},

{
id:32,
name:"Reel Pro",
price:200000,
level:"C",
category:"Audiovisuales",
img:"35.webp",
desc:"Producci√≥n avanzada con grabaci√≥n profesional, edici√≥n din√°mica, efectos visuales, subt√≠tulos animados y exportaci√≥n optimizada."
},

{
id:33,
name:"Producto Express",
price:200000,
level:"C",
category:"Fotograf√≠a",
img:"36.webp",
desc:"Fotograf√≠a profesional de producto individual, fondo limpio, iluminaci√≥n controlada y entrega de 3 fotos editadas."
},

{
id:34,
name:"Reel Avanzado",
price:250000,
level:"C",
category:"Audiovisuales",
img:"37.webp",
desc:"Producci√≥n completa con direcci√≥n creativa, grabaci√≥n profesional, edici√≥n avanzada, efectos din√°micos y narrativa estrat√©gica."
},

{
id:35,
name:"Logo Esencial",
price:250000,
level:"C",
category:"Branding",
bestseller:true,
img:"02.webp",
desc:"Dise√±o de logo principal, 2 propuestas iniciales, hasta 3 revisiones, entrega en webp, JPG y PDF vectorial."
},

{
id:36,
name:"Overlay Supreme",
price:250000,
level:"C",
category:"Streaming",
img:"38.webp",
desc:"Overlay completamente personalizado para streaming, dise√±o profesional, integraci√≥n de webcam y chat, entrega compatible con OBS."
},

{
id:37,
name:"Campa√±a Meta Ads (1)",
price:250000,
level:"C",
category:"Copy",
img:"39.webp",
desc:"Configuraci√≥n estrat√©gica de una campa√±a en Meta Ads, segmentaci√≥n detallada, estructura profesional y asesor√≠a b√°sica de optimizaci√≥n."
},

{
id:38,
name:"Celebraciones Momentos Express",
price:250000,
level:"C",
category:"Eventos",
img:"40.webp",
desc:"Cobertura fotogr√°fica breve (hasta 2 horas), m√≠nimo 20 fotos editadas profesionalmente y entrega digital."
},

{
id:39,
name:"Reel en Serie (x3)",
price:280000,
level:"C",
category:"Audiovisuales",
img:"41.webp",
desc:"Producci√≥n de 3 reels grabados en una sesi√≥n, edici√≥n din√°mica individual y entrega optimizada para redes."
},

{
id:40,
name:"Kit Corporativo Pro",
price:300000,
level:"C",
category:"Papeler√≠a",
img:"42.webp",
desc:"Incluye tarjeta, hoja membretada y firma digital, dise√±o alineado a identidad visual y archivos listos para impresi√≥n."
},

{
id:41,
name:"Marca Visual",
price:350000,
level:"D",
category:"Fotograf√≠a",
img:"43.webp",
desc:"Sesi√≥n fotogr√°fica estrat√©gica de marca (hasta 2 horas), 15 fotos editadas, direcci√≥n creativa y entrega en alta resoluci√≥n."
},

{
id:42,
name:"Combo Marca Starter",
price:350000,
level:"D",
category:"Branding",
img:"44.webp",
desc:"Incluye logo principal, paleta de colores, tipograf√≠as base y archivos listos para uso digital."
},

{
id:43,
name:"Cobertura B√°sica Corporativa",
price:350000,
level:"D",
category:"Eventos",
img:"45.webp",
desc:"Cobertura de evento empresarial (hasta 4 horas), m√≠nimo 30 fotos editadas y entrega digital profesional."
},

{
id:44,
name:"Reel Cine",
price:350000,
level:"D",
category:"Audiovisuales",
img:"46.webp",
desc:"Producci√≥n cinematogr√°fica con c√°mara profesional, colorizaci√≥n avanzada, storytelling emocional y exportaci√≥n en alta calidad."
},

{
id:45,
name:"Logo Pro",
price:400000,
level:"D",
category:"Branding",
recommended:true,
img:"03.webp",
desc:"Desarrollo completo de identidad visual: logo principal, isotipo, versiones monocrom√°ticas, paleta de color y manual b√°sico."
},

{
id:46,
name:"Pauta Mensual (gesti√≥n)",
price:400000,
level:"D",
category:"Copy",
img:"47.webp",
desc:"Gesti√≥n mensual de campa√±as en Meta Ads, monitoreo constante, optimizaci√≥n estrat√©gica y reporte b√°sico de resultados."
},

{
id:47,
name:"Evento Familiar",
price:400000,
level:"D",
category:"Eventos",
img:"48.webp",
desc:"Cobertura fotogr√°fica profesional (hasta 4 horas), m√≠nimo 40 fotos editadas y entrega digital privada."
},

{
id:48,
name:"Kit Full Stream",
price:500000,
level:"D",
category:"Streaming",
img:"48.webp",
desc:"Pack completo con overlay personalizado, 5 alertas animadas, 3 pantallas intermedias y compatibilidad con OBS."
},

{
id:49,
name:"Sesi√≥n Creativa Pro",
price:500000,
level:"D",
category:"Fotograf√≠a",
img:"49.webp",
desc:"Sesi√≥n fotogr√°fica avanzada (hasta 3 horas), direcci√≥n creativa, m√∫ltiples escenarios y entrega de 25 fotos editadas."
},

{
id:50,
name:"Bodas Recuerdo Eterno",
price:500000,
level:"D",
category:"Eventos",
img:"50.webp",
desc:"Cobertura de boda √≠ntima (hasta 6 horas), m√≠nimo 50 fotos editadas y entrega digital con selecci√≥n profesional."
},

{
id:51,
name:"Combo Marca Pro",
price:550000,
level:"D",
category:"Branding",
img:"51.webp",
desc:"Identidad visual completa con logo, variantes, paleta, tipograf√≠as, aplicaciones b√°sicas y manual resumido."
},

{
id:53,
name:"Manual de Marca Completo",
price:600000,
level:"E",
category:"Branding",
img:"04.webp",
desc:"Manual profesional en PDF que define usos correctos, tipograf√≠as, paleta, aplicaciones y lineamientos estrat√©gicos."
},

{
id:54,
name:"Jornada Completa Corporativa",
price:600000,
level:"E",
category:"Eventos",
img:"52.webp",
desc:"Cobertura integral (hasta 8 horas), m√≠nimo 60 fotos editadas, correcci√≥n profesional y entrega digital."
},

{
id:55,
name:"Full Celebraci√≥n",
price:700000,
level:"E",
category:"Eventos",
img:"53.webp",
desc:"Cobertura extendida de evento (hasta 8 horas), m√≠nimo 70 fotos editadas y video resumen profesional."
},


{
id:57,
name:"Boda Cl√°sica",
price:800000,
level:"E",
category:"Eventos",
img:"54.webp",
desc:"Cobertura completa (hasta 8 horas), m√≠nimo 70 fotos editadas y video resumen editado profesionalmente."
},

{
id:58,
name:"Boda Premium",
price:1200000,
level:"E",
category:"Eventos",
recommended:true,
img:"55.webp",
desc:"Cobertura total del evento, m√≠nimo 80 fotos editadas profesionalmente, video cinematogr√°fico, edici√≥n avanzada y entrega digital privada."
},
	{
id:59,
name:"üì¶ Plan Inicial",
price:600000,
level:"PACK",
category:"Paquetes",
img:"plan1.webp",
desc:"4 Reels + 4 Carruseles + 12 Stories + 10 Flyers + Redacci√≥n de contenido + Calendario programado + Optimizaci√≥n de biograf√≠a + √çconos de highlights.<br>Valor real sumando √≠tems por separado: $1.420.000 COP<br>Descuento aplicado: ‚Äì58%"
},
{
id:60,
name:"üöÄ Plan Medio",
price:800000,
level:"PACK",
category:"Paquetes",
img:"plan2.webp",
desc:"8 Reels + 8 Carruseles + 16 Stories + 15 Flyers + Redacci√≥n de contenido + Calendario programado + Optimizaci√≥n de biograf√≠a + √çconos de highlights.<br>Valor real sumando √≠tems por separado: $2.340.000 COP<br>Descuento aplicado: ‚Äì66%"
},
{
id:61,
name:"üèÜ Plan Pro",
price:1200000,
level:"PACK",
category:"Paquetes",
img:"plan3.webp",
desc:"16 Reels + 16 Carruseles + 20 Stories + 20 Flyers + Redacci√≥n de contenido + Calendario programado + Optimizaci√≥n de biograf√≠a + √çconos de highlights.<br>Valor real sumando √≠tems por separado: $4.080.000 COP<br>Descuento aplicado: ‚Äì71%"
}

];



/* STATE */

let cart = {};
let currentCategory = "";


/* RENDER */

function render(){

const grid = document.getElementById("grid");

let filtered = [...services];

const search = searchInput.value.toLowerCase();
const category = categoryFilter.value;
const priceRange = priceFilter.value;
const sort = sortFilter.value;

/* FILTROS */

if(category){
filtered = filtered.filter(s=>s.category===category);
}

if(search){
filtered = filtered.filter(s=>
s.name.toLowerCase().includes(search)
);
}

/* FILTRO PRECIO */

if(priceRange==="1"){
filtered = filtered.filter(s=>s.price<100000);
}
if(priceRange==="2"){
filtered = filtered.filter(s=>s.price>=100000 && s.price<=300000);
}
if(priceRange==="3"){
filtered = filtered.filter(s=>s.price>300000 && s.price<=600000);
}
if(priceRange==="4"){
filtered = filtered.filter(s=>s.price>600000);
}

/* ORDENAMIENTO */

if(sort==="low"){
filtered.sort((a,b)=>a.price-b.price);
}
if(sort==="high"){
filtered.sort((a,b)=>b.price-a.price);
}
if(sort==="az"){
filtered.sort((a,b)=>a.name.localeCompare(b.name));
}
if(sort==="za"){
filtered.sort((a,b)=>b.name.localeCompare(a.name));
}
if(sort==="premium"){
filtered = filtered.filter(s=>s.level==="C"||s.level==="D"||s.level==="E");
}
if(sort==="bestseller"){
filtered = filtered.filter(s=>s.bestseller);
}
/* ============================= */
/* FEATURED CAROUSEL LOGIC */
/* ============================= */

function renderFeatured(){

const track = document.getElementById("featuredTrack");

if(!track) return;

track.innerHTML = "";

/* Puedes elegir qu√© mostrar */
const featuredServices = services.filter(s => 
  s.recommended || s.bestseller || s.level === "E"
).slice(0,10);

featuredServices.forEach(s => {

track.innerHTML += `
<div class="card ${s.level==='E'?'card-premium':''}">
  <img src="${s.img}">
  <div class="card-content">
    <div class="badges">
      <div class="badge">${s.category}</div>
      ${s.bestseller ? '<div class="badge bestseller-badge">üî• M√°s vendido</div>' : ''}
      ${s.recommended ? '<div class="badge recommended-badge">‚≠ê Recomendado</div>' : ''}
    </div>
    <div class="card-title">${s.name}</div>
    <div class="price">$${format(s.price)}</div>
    <div class="card-buttons">
      <button class="add-btn" onclick="add(${s.id})">Agregar</button>
      <button class="view-btn" onclick="view(${s.id})">Ver</button>
    </div>
  </div>
</div>
`;

});

}
/* ============================= */
/* PACK CAROUSEL LOGIC */
/* ============================= */

function renderPacks(){

const track = document.getElementById("packTrack");
if(!track) return;

track.innerHTML = "";

const packs = services.filter(s => s.level === "PACK");

packs.forEach(s=>{

track.innerHTML += `
<div class="card">
  <img src="${s.img}">
  <div class="card-content">
    <div class="badges">
      <div class="pack-badge">PACK AHORRO</div>
      <div class="badge">${s.category}</div>
    </div>
    <div class="card-title">${s.name}</div>
    <div class="price">$${format(s.price)}</div>
    <div class="desc">${s.desc}</div>
    <div class="card-buttons">
      <button class="add-btn" onclick="add(${s.id})">Comprar Pack</button>
      <button class="view-btn" onclick="view(${s.id})">Ver</button>
    </div>
  </div>
</div>
`;

});

}

document.getElementById("nextPack").addEventListener("click", ()=>{
document.getElementById("packTrack").scrollBy({
left:320,
behavior:"smooth"
});
});

document.getElementById("prevPack").addEventListener("click", ()=>{
document.getElementById("packTrack").scrollBy({
left:-320,
behavior:"smooth"
});
});

renderPacks();

document.getElementById("nextFeatured").addEventListener("click", ()=>{
document.getElementById("featuredTrack").scrollBy({
left:300,
behavior:"smooth"
});
});

document.getElementById("prevFeatured").addEventListener("click", ()=>{
document.getElementById("featuredTrack").scrollBy({
left:-300,
behavior:"smooth"
});
});

renderFeatured();

/* RENDER */

grid.innerHTML="";

filtered.forEach(s=>{

grid.innerHTML+=`
<div class="card ${s.level==='E'?'card-premium':''}">

<img src="${s.img}">

<div class="card-content">

<div class="badges">
<div class="badge">${s.category}</div>

${s.level==='E'
? '<div class="badge premium-badge">Elite</div>'
: s.level==='D'
? '<div class="badge pro-badge">Pro+</div>'
: s.level==='C'
? '<div class="badge premium-badge">Premium</div>'
: '<div class="badge">Pro</div>'}

${s.bestseller
? '<div class="badge bestseller-badge">üî• M√°s vendido</div>'
: ''}

${s.recommended
? '<div class="badge recommended-badge">‚≠ê Recomendado</div>'
: ''}

</div>

<div class="card-title">${s.name}</div>
<div class="price">$${format(s.price)}</div>
<div class="desc">${s.desc}</div>

<div class="card-buttons">
<button class="add-btn" onclick="add(${s.id})">Agregar</button>
<button class="view-btn" onclick="view(${s.id})">Ver</button>
</div>

</div>
</div>
`;

});

}



/* VIEW MODAL */

function view(id){

const s = services.find(x=>x.id===id);

modalContent.innerHTML=`

<h3>${s.name}</h3>

<img src="${s.img}" style="width:100%;border-radius:10px;margin:10px 0;">

<p>${s.desc}</p>

<h3>$${format(s.price)}</h3>

<button onclick="add(${s.id});closeModal()" class="send">
Agregar
</button>

`;

modal.classList.add("active");

}

modal.onclick = e=>{
if(e.target.id==="modal")
modal.classList.remove("active");
}

function closeModal(){
modal.classList.remove("active");
}


/* CARRITO */
/* LOGICA ORIGINAL NO MODIFICADA */

function add(id){

if(!cart[id]){
cart[id]={...services.find(s=>s.id===id),qty:0};
}

cart[id].qty++;

updateCart();

}

function remove(id){

cart[id].qty--;

if(cart[id].qty<=0){
delete cart[id];
}

updateCart();

}


/* UPDATE CART ORIGINAL */

function updateCart(){

const cartItems=document.getElementById("cartItems");
cartItems.innerHTML="";

let subtotal=0;
let subtotalDescuento=0;
let totalPacks=0;
let totalC=0;

Object.values(cart).forEach(item=>{

let totalItem=item.price*item.qty;
subtotal+=totalItem;

// separar packs
if(item.level==="PACK"){
totalPacks+=totalItem;
}else{
subtotalDescuento+=totalItem;
}

// regla nivel C
if(item.level==="C"){
totalC+=totalItem;
}

cartItems.innerHTML+=`
<div class="cart-item-row">
<div class="cart-item-info">
<strong>${item.name}</strong>
<div class="cart-item-price">$${format(item.price)} c/u</div>
<div class="cart-item-subtotal">Total: $${format(totalItem)}</div>
</div>
<div class="cart-item-controls">
<button onclick="remove(${item.id})">-</button>
<span>${item.qty}</span>
<button onclick="add(${item.id})">+</button>
</div>
</div>`;
});

/* DESCUENTO SOLO SOBRE NO PACKS */
let discount=0;

if(subtotalDescuento>=1500000) discount=18;
else if(subtotalDescuento>=1000000) discount=15;
else if(subtotalDescuento>=600000) discount=10;
else if(subtotalDescuento>=300000) discount=5;

if(subtotalDescuento>0 && totalC/subtotalDescuento>0.4){
discount=Math.min(discount,10);
}

/* aplicar descuento SOLO a productos normales */
let descuentoAplicado=subtotalDescuento*discount/100;
let totalSinPacks=subtotalDescuento-descuentoAplicado;

/* total final = productos con descuento + packs sin descuento */
let total=totalSinPacks+totalPacks;

let iva=ivaCheck.checked ? total*0.19:0;
let totalFinal=total+iva;

/* PROGRESS BAR basada solo en productos con descuento */
let nextGoal=300000;
if(subtotalDescuento<300000) nextGoal=300000;
else if(subtotalDescuento<600000) nextGoal=600000;
else if(subtotalDescuento<1000000) nextGoal=1000000;
else if(subtotalDescuento<1500000) nextGoal=1500000;
else nextGoal=subtotalDescuento;

let progress=Math.min((subtotalDescuento/nextGoal)*100,100);

if(subtotalDescuento<1500000){
progressText.innerText="Te faltan $"+format(nextGoal-subtotalDescuento)+" para mayor descuento";
}else{
progressText.innerText="M√°ximo descuento alcanzado üéâ";
}

progressFill.style.width=progress+"%";

/* UI */
document.getElementById("subtotal").innerText=format(subtotal);

if(descuentoAplicado>0){
document.getElementById("discount").innerText =
discount+"% (-$"+format(descuentoAplicado)+")";
}else{
document.getElementById("discount").innerText="0%";
}

document.getElementById("total").innerText=format(total);
document.getElementById("totalFinal").innerText=format(totalFinal);

cartCount.innerText=Object.values(cart).reduce((a,b)=>a+b.qty,0);

window.quote={subtotal,discount,total,totalFinal,iva};
}

function renderRecommendations(){

const container = document.getElementById("recommendations");

if(!container) return;

container.innerHTML = "";

if(Object.keys(cart).length === 0) return;

let suggestions = [];

/* REGLAS */

Object.values(cart).forEach(item=>{

if(item.category === "Branding"){
suggestions.push(services.find(s=>s.name==="Manual de Marca"));
}

if(item.name === "Reel B√°sico"){
suggestions.push(services.find(s=>s.name==="Reel Pro"));
}

if(item.category === "Marketing"){
suggestions.push(services.find(s=>s.name==="Reel B√°sico"));
}

});
// Bundle Branding
if(cart[1] && !cart[2]){
  suggestions.push(services.find(s=>s.id===2));
}
/* PREMIUM BOOST */

if(!Object.values(cart).some(i=>i.level==="C")){
const premium = services.find(s=>s.level==="C");
if(premium) suggestions.push(premium);
}

/* FILTRAR */

suggestions = suggestions
.filter(s=>s && !cart[s.id])
.slice(0,3);

if(suggestions.length === 0) return;

container.innerHTML = "<h4>Recomendado para ti</h4>";

suggestions.forEach(s=>{

container.innerHTML += `
<div class="recommend-card">
<div>
<strong>${s.name}</strong>
<br>
$${format(s.price)}
</div>
<button onclick="add(${s.id})">+</button>
</div>
`;

});

}


/* FORMAT */

function format(n){
return Number(n).toLocaleString("es-CO");
}


/* TOGGLE CART */

function toggleCart(){

cartPanel.classList.toggle("active");
overlay.classList.toggle("active");

}


/* SEND ORIGINAL */

async function sendQuote(){

if(Object.keys(cart).length===0){
alert("Agrega al menos un servicio");
return;
}

const numeroCotizacion=
"OV-"+Date.now().toString().slice(-6);

const cliente={
nombre:nombre.value,
email:email.value,
whatsapp:whatsapp.value
};

const carrito=Object.values(cart);

await fetch(ENDPOINT,{
method:"POST",
body:JSON.stringify({
numeroCotizacion,
cliente,
carrito,
quote:window.quote
})
});

alert("Cotizaci√≥n enviada: "+numeroCotizacion);

cart={};

updateCart();

toggleCart();

}


/* EVENTS */
categoryFilter.addEventListener("change",render);
priceFilter.addEventListener("change",render);
sortFilter.addEventListener("change",render);

searchInput.addEventListener("input",render);

ivaCheck.addEventListener("change",updateCart);

document.querySelectorAll(".category").forEach(btn=>{

btn.onclick=function(){

document.querySelectorAll(".category")
.forEach(b=>b.classList.remove("active"));

this.classList.add("active");

currentCategory=this.dataset.category;

render();

};

});


render();
updateCart();
/* CERRAR CON ESC */
document.addEventListener("keydown",function(e){
if(e.key==="Escape" && cartPanel.classList.contains("active")){
toggleCart();
}
});
function toggleSearch(){
  document.querySelector(".search-container")
    .classList.toggle("active");
}
window.addEventListener("scroll", ()=>{
  document.querySelector(".header")
    .classList.toggle("scrolled", window.scrollY>40);
});

</script>

</body>
</html>
